# Maintainer: Antonio Rojas <arojas@archlinux.org>

pkgname=plasma-wayland-protocols
pkgver=1.2.0
pkgrel=2
pkgdesc="Plasma Specific Protocols for Wayland"
arch=(any)
url="https://kde.org/plasma-desktop"
license=(LGPL)
depends=()
makedepends=(qt5-base extra-cmake-modules)
source=(https://download.kde.org/stable/$pkgname/$pkgname-$pkgver.tar.xz{,.sig}
        plasma-wayland-protocols-fix-version.patch::https://invent.kde.org/libraries/plasma-wayland-protocols/-/commit/e4bc4e0d.patch)
sha256sums=('820dd6347f835f0f066a5f76333f29882d471fe6c4a02249d50901e0e81ef617'
            'SKIP'
            'f1a8dddb0258ca1a92a4506f3b571901df853e7a4b34df0166da6a98a9675c0f')
validpgpkeys=(CA1B4E348D22755A67EF4E1A6A4F2C4CDC8BC77F) # Aleix Pol Gonzalez <aleixpol@kde.org>

prepare() {
  patch -d $pkgname-$pkgver -p1 < plasma-wayland-protocols-fix-version.patch # Fix version number
}

build() {
  cmake -B build -S $pkgname-$pkgver
  cmake --build build
}

package() {
  DESTDIR="$pkgdir" cmake --install build
}
