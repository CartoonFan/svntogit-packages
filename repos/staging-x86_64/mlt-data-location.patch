From d0ff2b5a6586ddc0a0509c016ae56bdb80741034 Mon Sep 17 00:00:00 2001
From: Dan Dennedy <dan@dennedy.org>
Date: Mon, 3 May 2021 15:20:24 -0700
Subject: [PATCH] fix installed build cannot finds its modules and data

---
 CMakeLists.txt               | 2 +-
 Dockerfile                   | 2 --
 src/framework/CMakeLists.txt | 5 +----
 3 files changed, 2 insertions(+), 7 deletions(-)

diff --git a/src/framework/CMakeLists.txt b/src/framework/CMakeLists.txt
index 91e32d45d..7be23640d 100644
--- a/src/framework/CMakeLists.txt
+++ b/src/framework/CMakeLists.txt
@@ -101,10 +101,7 @@ if(WIN32)
 endif()
 
 if(NOT (WIN32 OR (APPLE AND RELOCATABLE)))
-  target_compile_definitions(mlt PRIVATE
-    $<BUILD_INTERFACE:PREFIX_DATA="${MLT_DATA_OUTPUT_DIRECTORY}" PREFIX_LIB="${MLT_MODULE_OUTPUT_DIRECTORY}">
-    $<INSTALL_INTERFACE:PREFIX_DATA="${CMAKE_INSTALL_FULL_DATADIR}/mlt-${MLT_VERSION_MAJOR}" PREFIX_LIB="${CMAKE_INSTALL_FULL_LIBDIR}/mlt-${MLT_VERSION_MAJOR}">
-  )
+  target_compile_definitions(mlt PRIVATE PREFIX_DATA="${CMAKE_INSTALL_FULL_DATADIR}/mlt-${MLT_VERSION_MAJOR}" PREFIX_LIB="${CMAKE_INSTALL_FULL_LIBDIR}/mlt-${MLT_VERSION_MAJOR}")
   target_link_options(mlt PRIVATE -Wl,--version-script=${CMAKE_CURRENT_SOURCE_DIR}/mlt.vers)
   set_target_properties(mlt PROPERTIES LINK_DEPENDS ${CMAKE_CURRENT_SOURCE_DIR}/mlt.vers)
 elseif(APPLE AND RELOCATABLE)
